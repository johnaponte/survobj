<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="survobj">
<title>Defining and using objects of class SURVIVAL • survobj</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Defining and using objects of class SURVIVAL">
<meta property="og:description" content="survobj">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">survobj</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/example_distributions.html">Defining and using objects of class SURVIVAL</a>
    <a class="dropdown-item" href="../articles/simulation_distributions.html">Simulation of survival times</a>
    <a class="dropdown-item" href="../articles/simulation_trials.html">Simulating trials with survival endpoints</a>
    <a class="dropdown-item" href="../articles/simulation_trials2.html">Simulation trials: non-proportional hazard</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/johnaponte/survobj/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Defining and using objects of class SURVIVAL</h1>
                        <h4 data-toc-skip class="author">John
Aponte</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/johnaponte/survobj/blob/HEAD/vignettes/example_distributions.Rmd" class="external-link"><code>vignettes/example_distributions.Rmd</code></a></small>
      <div class="d-none name"><code>example_distributions.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Here we present examples on how to construct and use objects of the
class SURVIVAL.</p>
<p>The function <code>s_factory(s_family,...)</code> is a function that
call the constructor of the family of distribution. Each family has it
own set of parameters. As the factories implement polymorphic behavior
according to the parameters given, it is not possible to partial match
the name of the parameters and they need to be spell correctly. If an
error on processing the parameters, the factory return a message with
the set of parameters accepted for that factory.</p>
<p>Once an object of a class SURVIVAL is instantiated, it has access to
the following set of methods:</p>
<ul>
<li>
<code>sfx(SURVIVAL, t)</code> for the survival (proportion of the
population free of events) at time <code>t</code>
</li>
<li>
<code>hfx(SURVIVAL, t)</code> for the hazard at time
<code>t</code>
</li>
<li>
<code>Cum_Hfx(SURVIVAL, t)</code> for the cumulative hazard at time
<code>t</code>
</li>
<li>
<code>InvCum_Hfx(SURVIVAL, H)</code> for inverse of the cumulative
hazard <code>H</code>
</li>
<li>
<code>rsurv(SURVIVAL, n)</code> for the generation of <code>n</code>
random survival times from the distribution</li>
<li>
<code>rsurvhr(SURVIVAL, hr)</code> for the generation of random
survival times with a hazard ratio <code>hr</code>
</li>
</ul>
<p>Instead of using the helper functions to call this methods, the
methods can be called directly from the object as:</p>
<ul>
<li><p><code>obj &lt;- s_factory(s_family, ...)</code> or
<code>obj &lt;- s_family(...)</code></p></li>
<li><p><code>obj$sfx(t)</code></p></li>
<li><p><code>obj$hfx(t)</code></p></li>
<li><p><code>obj$Cum_Hfx(t)</code></p></li>
<li><p><code>obj$InvCum_Hfx(H)</code></p></li>
<li><p><code>obj$rsurv(n)</code></p></li>
<li><p><code>obj$rsurvhr(hr)</code></p></li>
</ul>
<p>In addition, the following functions help to plot the
distributions</p>
<ul>
<li><p><code>plot(SURVIVAL)</code> a generic S3 method that calls the
<code><a href="../reference/SURVIVAL.html">plot_survival()</a></code> function</p></li>
<li><p><code>plot_survival(SURVIVAL, timeto, main)</code> which plots
the survival, hazard, cumulative hazard and the inverse cumulative
hazard functions from 0 to <code>timeto</code>. An optional title can be
specified with the <code>main</code> parameter</p></li>
<li><p><code>plot_compare(SURVIVAL1, SURVIVAL2, timeto)</code> produce a
comparison of the functions of two SURVIVAL objects. It produces a
ggplot of Kaplan-Meier curve and Cumulative Hazard for <code>nsim</code>
simulations for the a study with <code>subjects</code> number of
subjects, censored at time <code>timeto</code>. The optional parameter
<code>alpha</code> defines the transparency of each simulation in the
graph. In addition of the simulations, the graph also present the
calculated survival and cumulative hazard function of the distribution,
to evaluate how good the simulations are compared with the real
values.</p></li>
</ul>
<p>Functions to plots to simulated proportional hazards, accelerated
failure time and accelerated hazard models:</p>
<ul>
<li><p><code>ggplot_survival_hr &lt;- function(SURVIVAL, hr, timeto, subjects, nsim, alpha = 0.1)</code></p></li>
<li><p><code>ggplot_survival_aft &lt;- function(SURVIVAL, aft, timeto, subjects, nsim, alpha = 0.1)</code></p></li>
<li><p><code>ggplot_survival_ah &lt;- function(SURVIVAL, aft, hr, timeto, subjects, nsim, alpha = 0.1)</code></p></li>
</ul>
<p>This functions produce Kaplan-Meier curves and Cumulative hazard
curves for <code>nsim</code>simulations of the baseline distribution and
the corresponding proportional hazard, accelerate failure time censored
at <code>timeto</code> time.</p>
<p>The simulation of survival times and survival times with hazard
ratios follow the methods described by <span class="citation">Bender,
Augustin, and Blettner (2003)</span> and <span class="citation">Leemis
(1987)</span></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://johnaponte.github.io/survobj/">survobj</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/therneau/survival" class="external-link">survival</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="exponential-distribution">Exponential Distribution<a class="anchor" aria-label="anchor" href="#exponential-distribution"></a>
</h2>
<p>The canonical parameter of the exponential distribution is called
<code>lambda</code> and represents a constant hazard over time. The
units of <code>lambda</code> define the units of time for a
distribution. For example if <code>lambda = 3</code> is used to
represent the probability of having 3 events in 1 year, the survival
function <code>sfx(SURVIVAL, 1)</code> calculate the proportion of the
population free of events at 1 year.</p>
<p>The distribution can be defined also with the proportion of the
population free of events (<code>surv</code>) at time <code>t</code> or
the proportion of the population with events (<code>fail</code>) at time
<code>t</code></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Instanciate an object of class SURVIVAL with the Exponential distribution</span></span>
<span><span class="va">obj1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_factory.html">s_factory</a></span><span class="op">(</span><span class="va">s_exponential</span>, lambda <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">obj1</span></span>
<span><span class="co">#&gt; SURVIVAL object</span></span>
<span><span class="co">#&gt; Distribution:  EXPONENTIAL </span></span>
<span><span class="co">#&gt; lambda : 3</span></span>
<span></span>
<span><span class="co"># Survival at time 1</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">sfx</a></span><span class="op">(</span><span class="va">obj1</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.04978707</span></span>
<span></span>
<span><span class="co"># Hazard at time 1</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">hfx</a></span><span class="op">(</span><span class="va">obj1</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span></span>
<span><span class="co"># Cumulative hazard at time 1</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">Cum_Hfx</a></span><span class="op">(</span><span class="va">obj1</span>,<span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 3</span></span>
<span></span>
<span><span class="co"># Inverse of the cumulative hazard 0.6</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">invCum_Hfx</a></span><span class="op">(</span><span class="va">obj1</span>, <span class="fl">0.6</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.2</span></span>
<span></span>
<span><span class="co"># Plot of the distribution</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">obj1</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/exponential-1.png" width="672" style="display: block; margin: auto;"></p>
<p>The next set of examples show how to define an exponential
distribution based on the surviving or failing proportion at time
<code>t</code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_exponential.html">s_exponential</a></span><span class="op">(</span>surv <span class="op">=</span> <span class="fl">0.8</span>, t <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">obj2</span></span>
<span><span class="co">#&gt; SURVIVAL object</span></span>
<span><span class="co">#&gt; Distribution:  EXPONENTIAL </span></span>
<span><span class="co">#&gt; lambda : 0.2231436</span></span>
<span></span>
<span><span class="va">obj3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_exponential.html">s_exponential</a></span><span class="op">(</span>fail <span class="op">=</span> <span class="fl">0.2</span>, t <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">obj3</span></span>
<span><span class="co">#&gt; SURVIVAL object</span></span>
<span><span class="co">#&gt; Distribution:  EXPONENTIAL </span></span>
<span><span class="co">#&gt; lambda : 0.2231436</span></span></code></pre></div>
<p>The following code shows how to make 100 simulations of 1000 subjects
with an object of the SURVIVAL class. The red line is the value from the
distribution.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">obj4</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_exponential.html">s_exponential</a></span><span class="op">(</span>surv <span class="op">=</span> <span class="fl">0.25</span>, t <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">ggplot_survival_random</a></span><span class="op">(</span><span class="va">obj4</span>, timeto<span class="op">=</span><span class="fl">10</span>, subjects<span class="op">=</span><span class="fl">1000</span>, nsim<span class="op">=</span><span class="fl">100</span>, alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/exponential3-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="weibull-distribution">Weibull distribution<a class="anchor" aria-label="anchor" href="#weibull-distribution"></a>
</h2>
<p>The canonical parameters of the Weibull distribution are
<code>scale</code> and <code>shape</code>. The <code>scale</code> carry
on the information about the time units. The <code>scale</code>
parameter can be derived from the proportion surviving or failing at a
given time but the <code>shape</code> needs to be provided by the user.
Both <code>scale</code> and <code>shape</code> needs to be numbers
bigger than 0. A value of <code>shape</code> equal to 1 is similar to an
exponential distribution with <code>lambda</code> parameter equal to the
scale. If the <code>shape</code> is bigger than 1 the hazard is
increasing which means more events at the end of follow up, and if
between 0 and 1 is decreasing which translate to more events at the
beginning of the time at risk.</p>
<p>The following code shows the effect of the shape parameter on
distributions with the same scale.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">wobj1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_weibull.html">s_weibull</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">3</span>, shape <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span><span class="va">wobj2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_weibull.html">s_weibull</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">3</span>, shape <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">wobj3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_weibull.html">s_weibull</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">3</span>, shape <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">wobj1</span><span class="op">$</span><span class="va">sfx</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Weibull with shape 0.5"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Proportion without events"</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">wobj2</span><span class="op">$</span><span class="va">sfx</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Weibull with shape 1"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Proportion without events"</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">wobj3</span><span class="op">$</span><span class="va">sfx</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  main <span class="op">=</span> <span class="st">"Weibull with shape 1.5"</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"Proportion without events"</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">wobj1</span><span class="op">$</span><span class="va">hfx</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"hazard"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">wobj2</span><span class="op">$</span><span class="va">hfx</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"hazard"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>  <span class="va">wobj3</span><span class="op">$</span><span class="va">hfx</span>,</span>
<span>  from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  to <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  ylab <span class="op">=</span> <span class="st">"hazard"</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/weibull-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="gompertz-distribution">Gompertz distribution<a class="anchor" aria-label="anchor" href="#gompertz-distribution"></a>
</h2>
<p>The Gompertz distribution have two canonical parameters, the
<code>scale</code> and the <code>shape</code>. The <code>scale</code>
needs to be a number higher than zero, and represents the hazard at time
0. The <code>shape</code> can be any real number. Negative
<code>shape</code> produce a decreasing hazard. Positive
<code>shape</code> produces a increasing hazard. If the
<code>shape</code> is zero, the distribution is reduced to an
exponential distribution, but this is not implemented in this package.
Instead an error is produced.</p>
<p>Similarly to the other distributions, the <code>scale</code> can be
derived from the survival or failing proportion at a given time, but the
<code>shape</code> parameter needs to be provided.</p>
<p>The following graph shows the effect of the <code>scale</code>
parameter on the Gompertz distribution</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="co"># define a function to generate and plot Gompertz distributions</span></span>
<span><span class="va">plot_sfx_gompertz</span><span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">shape</span>, <span class="va">scale</span> <span class="op">=</span> <span class="fl">3</span>, <span class="va">timeto</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/s_gompertz.html">s_gompertz</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">shape</span>, scale <span class="op">=</span> <span class="va">scale</span><span class="op">)</span><span class="op">$</span><span class="va">sfx</span>,</span>
<span>    from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    to <span class="op">=</span> <span class="va">timeto</span>,</span>
<span>    main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"Shape: "</span>, <span class="va">shape</span><span class="op">)</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>    ylab <span class="op">=</span> <span class="st">"Proportion without events"</span>,</span>
<span>    ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">plot_hfx_gompertz</span><span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">shape</span>, <span class="va">scale</span> <span class="op">=</span> <span class="fl">3</span>, <span class="va">timeto</span> <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="../reference/s_gompertz.html">s_gompertz</a></span><span class="op">(</span>shape <span class="op">=</span> <span class="va">shape</span>, scale <span class="op">=</span> <span class="va">scale</span><span class="op">)</span><span class="op">$</span><span class="va">hfx</span>,</span>
<span>    from <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    to <span class="op">=</span> <span class="va">timeto</span>,</span>
<span>    xlab <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>    ylab <span class="op">=</span> <span class="st">"hazard"</span>,</span>
<span>    ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">plot_sfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span><span class="op">)</span></span>
<span><span class="fu">plot_sfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="op">-</span><span class="fl">0.10</span><span class="op">)</span></span>
<span><span class="fu">plot_sfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span></span>
<span><span class="fu">plot_sfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span>
<span><span class="fu">plot_hfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="op">-</span><span class="fl">0.25</span><span class="op">)</span></span>
<span><span class="fu">plot_hfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="op">-</span><span class="fl">0.10</span><span class="op">)</span></span>
<span><span class="fu">plot_hfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">0.10</span><span class="op">)</span></span>
<span><span class="fu">plot_hfx_gompertz</span><span class="op">(</span>shape <span class="op">=</span> <span class="fl">0.25</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/gomperz-1.png" width="672" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="piecewise-exponential-distribution">Piecewise Exponential distribution<a class="anchor" aria-label="anchor" href="#piecewise-exponential-distribution"></a>
</h2>
<p>The Piecewise Exponential distribution is a very flexible
distribution where the hazard is treated as constant until a breaks
occurs and the value of a new hazard is used. The class implements two
parameters the <code>breaks</code> that defines the breaks points and
the <code>hazards</code> that define the hazard used until the break
point time. The factory function will provide a warning if the last
break is not <code>Inf</code> as otherwise the distribution is not
completely defined.</p>
<p>The parameters
<code>break = c(1,2,3,Inf), hazards = c(0.1,3,4,3)</code> implements a
distribution where the hazard is 0.1 until time 1, 3 from time 1 until
time 2, a hazard of 4 until time 3 and from that point a hazard of 3
again.</p>
<p>The distribution can be also defined with the proportion surviving or
failing, <code>breaks</code> and <code>segments</code>. In this case the
<code>segments</code> are scaled to create hazards that results in a
specified proportion surviving or failing at the last not Inf break
point. For example the parameters
<code>surv = 0.2, breaks = c(1,2,3,Inf),  segments = c(1, 2, 3, 1)</code>
will scale the segments to hazards in way that at time = 3 the surviving
proportion is 0.2. See the following example</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pobj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_piecewise.html">s_piecewise</a></span><span class="op">(</span>surv <span class="op">=</span> <span class="fl">0.2</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="cn">Inf</span><span class="op">)</span>, segments <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">pobj</span></span>
<span><span class="co">#&gt; SURVIVAL object</span></span>
<span><span class="co">#&gt; Distribution:  PIECEWISE </span></span>
<span><span class="co">#&gt; breaks : 1 2 3 Inf </span></span>
<span><span class="co">#&gt; hazards : 0.2682397 0.5364793 0.804719 0.2682397</span></span>
<span><span class="va">pobj</span><span class="op">$</span><span class="fu">sfx</span><span class="op">(</span><span class="fl">3</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 0.2</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">plot_survival</a></span><span class="op">(</span><span class="va">pobj</span>, timeto <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/piecewise-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="log-logistic-distribution">Log-logistic distribution<a class="anchor" aria-label="anchor" href="#log-logistic-distribution"></a>
</h2>
<p>The Log-logistic distribution have two canonical parameters, the
scale and the shape parameters.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pobj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_loglogistic.html">s_loglogistic</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">3</span>, shape <span class="op">=</span> <span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">plot_survival</a></span><span class="op">(</span><span class="va">pobj</span>, timeto <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/loglogistic-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="log-normal-distribution">Log-Normal distribution<a class="anchor" aria-label="anchor" href="#log-normal-distribution"></a>
</h2>
<p>The Log-normal distribution have two canonical parameters. The shape
parameter that defined the median value of the distribution, and the
shape parameter that represents the standard deviation of the
distribution in the log scale.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">pobj</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_lognormal.html">s_lognormal</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">1.5</span>, shape <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">plot_survival</a></span><span class="op">(</span><span class="va">pobj</span>, timeto <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/lognormal-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2">
<h2 id="comparison-of-survival-objects">Comparison of SURVIVAL objects<a class="anchor" aria-label="anchor" href="#comparison-of-survival-objects"></a>
</h2>
<p>The function <code><a href="../reference/SURVIVAL.html">compare_survival()</a></code> can produce a graphic
comparison of two SURVIVAL objects. The objects no need to be from the
same distribution family.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">cobj1</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_exponential.html">s_exponential</a></span><span class="op">(</span>lambda <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span><span class="va">cobj2</span><span class="op">&lt;-</span> <span class="fu"><a href="../reference/s_gompertz.html">s_gompertz</a></span><span class="op">(</span>scale <span class="op">=</span> <span class="fl">3</span>, shape <span class="op">=</span> <span class="fl">0.4</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/SURVIVAL.html">compare_survival</a></span><span class="op">(</span><span class="va">cobj1</span>, <span class="va">cobj2</span>, timeto <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="example_distributions_files/figure-html/compare-1.png" width="672" style="display: block; margin: auto;"></p>
</div>
<div class="section level2 unnumbered">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-bender2003" class="csl-entry">
Bender, R., Thomas Augustin, and Maria Blettner. 2003. <span>“Generating
Survival Times to Simulate Cox Proportional Hazards Models.”</span>
<em>Universitätsbibliothek Der Ludwig-Maximilians-Universität
München</em>. <a href="https://doi.org/10.5282/UBM/EPUB.1716" class="external-link">https://doi.org/10.5282/UBM/EPUB.1716</a>.
</div>
<div id="ref-leemis1987" class="csl-entry">
Leemis, Lawrence M. 1987. <span>“Variate Generation for Accelerated Life
and Proportional Hazards Models.”</span> <em>Operations Research</em> 35
(6): 892–94. <a href="https://www.jstor.org/stable/171438" class="external-link">https://www.jstor.org/stable/171438</a>.
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Aponte John.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
